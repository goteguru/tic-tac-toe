<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Tic-Tac-Toe HTML client</title>
  <meta name="description" content="Tic-Tac-Toe API gyakorlat html kliens">
  <meta name="author" content="MonK">

<script>
	var api = "http://localhost:1111/" 
	function newgame(f) {
		var form = document.getElementById("newgame")
		var size= form.elements['width'].value
		var win = form.elements['win'].value
		alert(api+'new/'+size+'x'+size)
		const request = new Request(api+'new/'+size+'x'+size, {
			method: 'POST',
			body: '{"foo": "bar"}'
		})
		try{
			fetch(request)
			.then(response => {
			    if (response.status === 200) {
			      console.debug(response);
			      return response.json();
			    } else {
			      throw new Error('API server error.');
			    }
			})
			.then(response => {
			    console.debug(response);
			}).catch(error => {
			    console.error(error);
			})
		} catch (e) {
			console.error(e)
		}
		return false

	}
</script>


</head>

<body>
	<form method="post" id="newgame" onsubmit="return newgame(this)">
		<label for="gamesize">Game size:</label>
		<select name="width" id="gamesize">
			<option value="3">3x3</option>
			<option value="5">5x5</option>
			<option value="7">7x7</option>
		</select>
		<label for="win">Win length:</label>
		<select name="win_length" id="win">
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5</option>
		</select>
		<input type="submit" Value="Ok">
		
	</form>
</body>
</html>
